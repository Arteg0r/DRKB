#spec #event

## Введение в События 

События  являются способом прокачки Героев в Экспедиции. События  возникают на незанятых Противниками и POI Гексах. События происходят при занятии Отрядом Героев Гекса, при соблюдении нужных условий и с некоторой вероятностью. 


## Условия появления События

- Отряд завершил перемещение на новый Гекс
- На Гексе нет Противника или POI
- Полное удовлетворение по условиям События со стороны и Гекса, и Отряда 
- Событие наступило после проверки шанса  


## Логика работы Процессора Событий

Для удобства, под Процессором Событий понимаем код, отвечающий за манипуляции с Событиями.

1. Процессор отбирает из реестра событий те, которые вообще возможны - имеются в наличии все необходимые параметры Гекса и характеристики Героев из Отряда 
3. Процессор выясняет, возникло или нет Событие, исходя из условий вероятности,  записанной в Событии
4. Если сработали несколько Событий, процессор выбирает одно из них случайным образом (не показываем на одном Гексе несколько)
5. Процессор готовит одно или несколько предложений для игрока согласно сценарию события: определяет задействованных Героев и выдвигает предложение по изменению их характеристик 
7. Процессор блокирует управление на Карте Мира и показывает интерфейс События
8. Процессор записывает изменения характеристик Героев согласно выбору игрока; закрывает интерфейс События, разблокирует управление на Карте Мира


## Интерфейс события

Событие оформлено в виде всплывающего поверх Карты Мира окна. Окно блокирует перемещение игрока на карте мира до тех пор, пока остается активным, и не будет закрыто. Окно состоит из следующих частей:

- Заголовок события
- Художественный неизменяемый шаблон текста события + внутри него переменные 
- Описание вариантов развития события с портретами участвующих в них героев
- Контрол, который фиксирует выбор игрока - допустим, radio button
- Кнопка подтверждения сделанного выбора - закрывает окно; разблокирует действия игрока на Карте Мира; записывает результат в характеристики

## Компоненты События

- Условия возникновения (требования к Гексу и Героям)
- Вероятность возникновения
- Сценарий события: все комбинации действующих лиц и последствий
- Статичный художественный текст заголовка
- Статичный художественный текстовый шаблон описания события
- Статичные художественные тексты исходов события

События будут описаны в рамках отдельной таблицы (либо на новых листах внутри существующей - как закажешь, Костя)


## Параметры гекса и характеристики Героя - комбинации 

Каждый Гекс обладает набором параметров (характеристик), описанных в соответвущей таблице/либо новых листов в существующей (не создана/ нет пока их).

Каждый Герой обладает набором характеристик, описанных в соотвествующей таблице (создана, будет дополняться нужными характеристиками).

Событие может появляться на разных видах Гексах, имеющих нужные параметры (триггерящие Событие). Например, на разных гексах может расти дерево или лежать большой камень. 

Точно также Событие происходит с разными Героями, у которых есть нужные характеристи, триггерящие Событие. Например, родинка или бессовестность как черта хараткера может быть и у Мага Огня, и у Рыцаря.





