#poi #spec

## Введение

Механика Выносливость вводит ограничение на передвижения отряда героев по Карте Мира. Механика принуждает игрока: планировать маршрут, делать выборы и жертвовать альтернативами, искать возможности экономить силы и  их восполнить. 

## Компоненты механики

- Расчет стартового запаса Выносливости
- Обновляющийся с каждым ходом отряда счетчик Выносливости на Карте Мира (согласно расценке гекса)
- Объект Источник на Карте Мира (poi), полностью восстанавливающий запас Выносливости отряда

## Расчет стартового запаса

Запаса отряда выносливости считается по формуле:

> Сумма всех героев (Здоровье Героя * Скорость Героя) / Количество героев в отряде

Значение округляется до целого числа - дробная часть отбрасывается.

Запас Выносливости отряда считается после нажатия кнопки Отправиться в Экспедицию

`Дополнительно: Можно показывать Запас Выносливости на экране Библиотека, обновляя счетчик при каждом перетаскивании героя из библиотеки в отряд и обратно

## Счетчик выносливости на Карте Мира

Место установки счетчика и внешний вид - неважны. Просто число на краю экрана, легко читаемое, достаточно размера.

Каждое перемещение на гекс стоит очков Выносливости. Когда Отряд игрока делает ход, значение счетчика Выносливости уменьшается на цену перемещения (зависит от типа гекса, на который герой переместился)

Если при перемещении Героя счетчик Выносливости пересекает нулевую отметку, отряд считается потерянным, а игрок возвращается в библиотеку.

## Гексы, стоимость перемещения и Источник

- Обычный зеленый гекс отнимает 10 очков Выносливости (если на нем нет Источника)
- Противник, стоящий на гексе, отнимает 10 очков Выносливости (таким образом, зеленый гекс с противником отнимает 20 очков)
- Источник не отнимает Выносливость, а полностью ее Восстанавливает.

## Источники: механизм, спавн,  внешний вид

Источники спавнятся на Карте Мира случайным образом. Количество источников зависит от конечного размера карты. Для проверки работы механики  
можно установить количество Источников с помощью рандома: от 3 до 5 штук на карту.

Источник срабатывает автоматически: когда отряд Героев оказывается на клетке с источником, счетчик Выносливости возвращается к стартовому значению (рассчитаному в начале партии). Посещать источники можно один раз.

Источник является анимированным спрайтом, изображащим водопад. Спрайт героя помещается поверх спрайта источника. После ухода героя с гекса с Источником спрайт работающего источника заменяется другим спрайтом - использованного (без анимации).

Файлы спрайтов лежат в папке poi.