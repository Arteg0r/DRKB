Бой может быть ручным, автоматическим или полу. Решение будет принято в процессе работы с прототипами и дизайном всего проекта.

  

Сражения 4 на 4 - это минимум.

  

Порядок боя:

  

-   Начинаем новый раунд
    
-   Создаем очередь ходов:
    

-   у кого скорость больше, тот и первее
    
-   если у нескольких героев одинаковая скорость, то порядок хода определяется рандомом
    

-   Берем первого героя из очереди
    
-   Проверяем, если на нем “бонус” пропуска хода, если он есть - пропускаем ход, проверяем  длительность “бонуса”, снимаем его с героя, если закончился
    
-   Проверяем, есть ли на нем дамажащие ежеходно “бонус” (вроде заморозки, горения), если да - накладываем на героя (отнимаем жизнь)
    
-   Рассчитываем его удар по противнику:
    

-   Накладываем дамаг на противника. Если у противника закончилась жизнь, то он умер, полностью исключаем из боя
    
-   Накладываем на противника “бонус”, если бонус сработал.
    

-   Переходим к следующему герою
    
-   …
    
-   Завершаем раунд
    
-   Начинаем след раунд
    

  

Расчет дамага:

  

1. Нанесен ли урон вообще: точность минус уклонение, а из этого финальная вероятность нанесения удара.

  

Если урон не прошел, считаем, что герой промахнулся, заканчиваем ход этого героя.

  

2. Выбираем случайным образом точное значение урона в диапазоне x-y

  

3. Проверяем критический урон - удваиваем полученный в п. 2 урон, если крит выпал (если нет, наносим обычный урон из п. 2)

  

4. Проверяем, сработал ли бонус у соотв типа урона:

1.  проверяем вероятность срабатывания бонуса у атакующего героя
    
2.  проверяем, сработало ли сопротивление к этому бонусу у акакуемого
    
3.  если 1 - да, 2 - нет, то накладываем соотв бонус на атакуемого, иначе - бонус не сработал.
    

  

5. Проверяем, какой урон был отражен броней (отнимаем процент брони урона из пункта 3). Наносим оставшийся урон. Если выпал бонус колющего урона в п.4 - наносим весь урон из пункта 3.

  
  
  
  
  

Бои в идеале должны быть не про максимальный урон, который могут нанести герои, а про эффективность отряда в целом. 

  

Рандом при расчетах: честный рандом - каждый раз кидаем “кубик”, не рейт (условно, каждый двадцатый), не под ожидание игрока (но держим этот пункт в голове на будущее)

  
См. также [Характеристики героев](https://docs.google.com/document/u/0/d/12Kh-P6rStdeo1lX0JGVA6fWz2UDvL4M6K3XV3MU8hZA/edit)**